<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>NodeArt</title>
  <link rel="stylesheet" type="text/css" href="/semantic/dist/semantic.min.css">
 <script src="/semantic/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="/semantic/dist/semantic.min.js" type="text/javascript"></script>
</head>

<body>
  <div class="ui container">
    <h2 class="ui dividing header">Query some Twitter data</h2>
    <form class="ui form" id="myForm" onsubmit="return false;">
      <div class="field">
        <label for="teamName"> Enter the @ of a team you would like to search for:</label>
        <input type="text" name="teamName" value="@ManUtd">
      </div>
      <div class="field">
        <label for="playerName">Enter the @ of a player you'd like to find:</label>
        <input type="text" name="playerName" value="@WayneRooney">
      </div>
      <div class="field">
        <label for="hashtag">Enter any related hashtags:</label>
        <input type="text" name="hashtag" value="#ManUtdVArsenal">
      </div>
      <div class="field">
        <label for="keywords">Enter any specific keywords:</label>
        <input type="text" name="keywords" value="">
      </div>
      <button class="ui button" id="sendButton">Query Data</button>
    </form>
  </div>

  <script>
    function sendAjaxQuery(url, data) {
      $.ajax({
        type: 'POST',
        url: 'postFile.html',
        dataType: 'json',
        data: data,
        success: function(data) {
          alert('success ' + data);
          var struct = JSON.parse(data);
        },
        error: function(xhr, status, error) {
          console.log('Error: ' + error.message);
          alert('error connecting');
        }
      });
    }


    $.fn.serializeObject = function() {
      var o = {};
      var a = this.serializeArray();
      $.each(a, function() {
        if (o[this.name] !== undefined) {
          if (!o[this.name].push) {
            o[this.name] = [o[this.name]];
          }
          o[this.name].push(this.value || '');
        } else {
          o[this.name] = this.value || '';
        }
      });
      return o;
    };

    function sendData() {
      var form = document.getElementById('myForm');
      sendAjaxQuery('http://localhost:3000/', JSON.stringify($('form').serializeObject()));
    }


    var sendButton = document.getElementById('sendButton');
    sendButton.onclick = sendData;
  </script>
</body>

</html>
